<!DOCTYPE html>
<html lang="id" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dmaz Alyxers Premium - Solusi Digital Terbaik</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; }
        .dark body { background-color: #0d1117; }

        @keyframes card-enter {
            from { opacity: 0; transform: translateY(30px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        @keyframes toast-in-out {
            0% { transform: translateY(100%); opacity: 0; }
            15% { transform: translateY(0); opacity: 1; }
            85% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(100%); opacity: 0; }
        }
        @keyframes hero-glow {
            0% { box-shadow: 0 0 15px -5px rgba(59, 130, 246, 0.4); }
            50% { box-shadow: 0 0 25px 0px rgba(59, 130, 246, 0.6); }
            100% { box-shadow: 0 0 15px -5px rgba(59, 130, 246, 0.4); }
        }
        .animation-hero-glow { animation: hero-glow 4s ease-in-out infinite; }
        .toast-notification { animation: toast-in-out 3.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; }

        .product-card {
            opacity: 0;
            animation: card-enter 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }
        .product-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            border-radius: inherit; border: 2px solid transparent;
            background: linear-gradient(120deg, #818cf8, #3b82f6, #60a5fa) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: destination-out; mask-composite: exclude;
            z-index: 1; opacity: 0; transition: opacity 0.4s ease;
        }
        .product-card:hover::before { opacity: 1; }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px -15px rgb(0 0 0 / 0.1); }
        .dark .product-card:hover { box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.2), 0 0 15px -5px rgba(59, 130, 246, 0.3); }
        .product-badge {
            position: absolute; top: 10px; right: -30px; background-color: #f59e0b;
            color: white; padding: 4px 30px; font-size: 10px; font-weight: 700;
            text-transform: uppercase; transform: rotate(45deg); box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 2;
        }
        .product-badge.best-seller { background-color: #ef4444; }

        .modal {
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear 0.3s;
        }
        .modal.active { opacity: 1; visibility: visible; transition-delay: 0s; }
        .modal .modal-content {
            transform: translateY(30px) scale(0.95);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .modal.active .modal-content { transform: translateY(0) scale(1); }
        body.modal-open { overflow: hidden; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 8px; border: 2px solid transparent; background-clip: content-box;}
        .dark ::-webkit-scrollbar-thumb { background: #374151; }
        ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
        .dark ::-webkit-scrollbar-thumb:hover { background: #4b5563; }
        
        .category-tabs::-webkit-scrollbar { height: 0; }

        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details .faq-arrow { transition: transform 0.3s ease; }
        details[open] .faq-arrow { transform: rotate(180deg); }

        .skeleton {
            background-color: #e5e7eb; border-radius: 1rem;
            animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .dark .skeleton { background-color: #1f2937; }
        @keyframes pulse { 50% { opacity: 0.6; } }

        .fly-to-cart {
            position: absolute;
            border-radius: 50%;
            transition: transform 0.8s cubic-bezier(0.55, 0.09, 0.68, 0.53), opacity 0.8s linear;
            z-index: 999;
        }
        
        .hero-slider .swiper-slide {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .hero-slider .swiper-pagination-bullet {
            width: 8px;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.5);
            opacity: 1;
            transition: all 0.3s;
        }
        .hero-slider .swiper-pagination-bullet-active {
            background-color: white;
            transform: scale(1.2);
        }
        .hero-slider .swiper-button-prev,
        .hero-slider .swiper-button-next {
            color: white;
            width: 30px;
            height: 30px;
            background-color: rgba(0,0,0,0.2);
            border-radius: 50%;
            transition: background-color 0.3s;
        }
        .hero-slider .swiper-button-prev:hover,
        .hero-slider .swiper-button-next:hover {
             background-color: rgba(0,0,0,0.4);
        }
        .hero-slider .swiper-button-prev::after,
        .hero-slider .swiper-button-next::after {
            font-size: 14px;
            font-weight: 900;
        }
        
        .tab-button {
            padding: 8px 16px;
            cursor: pointer;
            background: transparent;
            border: 0;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease-in-out;
            font-weight: 600;
            color: #6b7280; /* text-gray-500 */
            margin-bottom: -2px;
        }
        .dark .tab-button {
            color: #9ca3af; /* dark:text-gray-400 */
        }
        .tab-button.active {
            color: #3b82f6; /* text-blue-500 */
            border-bottom-color: #3b82f6; /* border-blue-500 */
        }
        .dark .tab-button.active {
             color: #60a5fa; /* dark:text-blue-400 */
             border-bottom-color: #60a5fa; /* dark:border-blue-400 */
        }
        .tab-panel {
            display: none;
            padding: 16px 4px 4px 4px;
        }
        .tab-panel.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }


    </style>
</head>
<body class="max-w-md mx-auto bg-gray-50 dark:bg-[#0d1117] text-gray-800 dark:text-gray-200 transition-colors duration-300">

    <div id="toast-container" class="fixed bottom-20 left-1/2 -translate-x-1/2 z-[60] w-11/12 max-w-sm"></div>

    <div class="relative min-h-screen pb-28">
        <header class="bg-gray-50/80 dark:bg-[#0d1117]/80 backdrop-blur-lg p-4 sticky top-0 z-20 border-b border-gray-200/80 dark:border-gray-800/80">
            <div class="flex items-center justify-between mb-4">
                 <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center rounded-lg font-black text-white text-xl shadow-lg shadow-blue-500/30">P</div>
                    <h1 class="font-bold text-xl text-gray-900 dark:text-white">Dmaz Alyxers</h1>
                </div>
                <div class="flex items-center gap-2">
                    <button id="theme-toggle" aria-label="Toggle Dark Mode" class="w-10 h-10 flex items-center justify-center text-xl text-gray-500 dark:text-gray-400 hover:bg-gray-200/80 dark:hover:bg-gray-800/80 rounded-full transition-colors">
                        <i class="fas fa-sun" id="theme-icon-light"></i>
                        <i class="fas fa-moon" id="theme-icon-dark" style="display:none;"></i>
                    </button>
                    <button id="openCartBtn" aria-label="Buka Keranjang" class="relative w-10 h-10 flex items-center justify-center text-xl text-gray-500 dark:text-gray-400 hover:bg-gray-200/80 dark:hover:bg-gray-800/80 rounded-full transition-colors">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cartBadge" class="absolute -top-1 -right-1 bg-blue-500 text-white rounded-full text-[10px] w-5 h-5 flex items-center justify-center border-2 border-gray-50 dark:border-[#0d1117] transition-transform transform scale-0 font-bold">0</span>
                    </button>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <div class="relative flex-grow">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-4"><i class="fas fa-search text-gray-400"></i></span>
                    <input type="text" id="searchInput" placeholder="Cari Netflix, Spotify, Diamond ML..." class="w-full bg-gray-200/60 dark:bg-gray-800/60 rounded-full py-2.5 pl-11 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 border-2 border-transparent transition placeholder:text-gray-500 dark:placeholder:text-gray-400">
                </div>
                <div class="relative">
                     <select id="sortControl" aria-label="Urutkan Produk" class="appearance-none bg-gray-200/60 dark:bg-gray-800/60 rounded-full py-2.5 pl-4 pr-10 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 border-2 border-transparent transition text-gray-600 dark:text-gray-300">
                        <option value="default">Urutkan</option>
                        <option value="price-asc">Harga Termurah</option>
                        <option value="price-desc">Harga Termahal</option>
                        <option value="rating-desc">Rating Tertinggi</option>
                    </select>
                    <span class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"><i class="fas fa-chevron-down text-gray-400 text-xs"></i></span>
                </div>
            </div>
        </header>

        <div class="p-4">
            <section class="hero-slider swiper mb-6 rounded-2xl shadow-lg shadow-blue-500/20 animation-hero-glow overflow-hidden">
                <div class="swiper-wrapper">
                    <div class="swiper-slide bg-gradient-to-br from-blue-500 to-indigo-600 p-6">
                        <h2 class="text-2xl font-extrabold text-white mb-2">Solusi Digital Terlengkap</h2>
                        <p class="text-blue-100 text-sm mb-4 max-w-xs">Akun premium dan voucher game dengan harga terbaik, proses instan, dan garansi penuh.</p>
                        <a href="#productGrid" class="bg-white/90 text-blue-600 font-bold py-2 px-5 rounded-full text-sm hover:bg-white transition-all transform hover:scale-105">Mulai Belanja</a>
                    </div>
                    <div class="swiper-slide bg-gradient-to-br from-red-500 to-orange-500 p-6">
                        <h2 class="text-2xl font-extrabold text-white mb-2">Promo Spesial Gamers!</h2>
                        <p class="text-orange-100 text-sm mb-4 max-w-xs">Top up Diamond ML, FF, dan Valorant Points. Cepat, aman, dan paling murah se-Indonesia!</p>
                        <a href="#productGrid" class="category-direct-link bg-white/90 text-red-600 font-bold py-2 px-5 rounded-full text-sm hover:bg-white transition-all transform hover:scale-105" data-category="game">Lihat Produk Game</a>
                    </div>
                     <div class="swiper-slide bg-gradient-to-br from-purple-600 to-indigo-700 p-6">
                        <h2 class="text-2xl font-extrabold text-white mb-2">Nonton & Musik Tanpa Batas</h2>
                        <p class="text-purple-100 text-sm mb-4 max-w-xs">Langganan Netflix, Spotify, dan Youtube Premium jadi lebih hemat. Anti iklan, anti ribet.</p>
                        <a href="#productGrid" class="category-direct-link bg-white/90 text-purple-700 font-bold py-2 px-5 rounded-full text-sm hover:bg-white transition-all transform hover:scale-105" data-category="app">Cek Langganan App</a>
                    </div>
                </div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-pagination"></div>
            </section>
            
            <div class="mb-5">
                <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-3">Kategori</h2>
                <div id="categoryTabs" class="category-tabs flex items-center gap-2 overflow-x-auto pb-2"></div>
            </div>

            <main id="productGrid" class="grid grid-cols-2 gap-4 sm:gap-5"></main>

            <div id="skeleton-loader" class="grid grid-cols-2 gap-4 sm:gap-5">
                <div class="skeleton h-56"></div> <div class="skeleton h-56"></div>
                <div class="skeleton h-56"></div> <div class="skeleton h-56"></div>
            </div>
            
            <div id="no-results" class="text-center py-10 hidden">
                <figure class="w-40 mx-auto mb-4 text-gray-300 dark:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14z"></path>
                    </svg>
                </figure>
                <h3 class="font-bold text-lg text-gray-800 dark:text-gray-200">Oops! Produk tidak ditemukan</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">Coba gunakan kata kunci lain atau filter kategori.</p>
            </div>
            
             <section class="mt-16 bg-white dark:bg-gray-800/50 p-6 rounded-2xl border border-gray-200 dark:border-gray-700/50">
                <h2 class="text-2xl font-bold text-center mb-6 text-gray-900 dark:text-white">Kenapa Pilih Kami?</h2>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 text-center">
                    <div class="flex flex-col items-center p-2 rounded-lg transition-transform duration-300 hover:scale-105">
                        <div class="w-14 h-14 mb-3 flex items-center justify-center bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/50 dark:to-blue-900/80 text-blue-500 dark:text-blue-300 rounded-full text-2xl">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200">Proses Instan</h4>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Aktivasi cepat dalam hitungan menit.</p>
                    </div>
                    <div class="flex flex-col items-center p-2 rounded-lg transition-transform duration-300 hover:scale-105">
                        <div class="w-14 h-14 mb-3 flex items-center justify-center bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/50 dark:to-green-900/80 text-green-500 dark:text-green-300 rounded-full text-2xl">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200">Garansi Penuh</h4>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Jaminan keamanan & durasi sesuai pesanan.</p>
                    </div>
                    <div class="flex flex-col items-center p-2 rounded-lg transition-transform duration-300 hover:scale-105">
                        <div class="w-14 h-14 mb-3 flex items-center justify-center bg-gradient-to-br from-yellow-100 to-yellow-200 dark:from-yellow-900/50 dark:to-yellow-900/80 text-yellow-500 dark:text-yellow-300 rounded-full text-2xl">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200">Bantuan Sigap</h4>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Admin ramah siap membantu kapan saja.</p>
                    </div>
                </div>
            </section>
            
            <section class="mt-16">
                <h2 class="text-2xl font-bold text-center mb-6 text-gray-900 dark:text-white">Apa Kata Mereka?</h2>
                <div class="space-y-4">
                     <div class="bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700/50">
                        <div class="flex items-center mb-3">
                            <img src="data:image/jpeg;base64,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" alt="User Ahmad Fauzi" class="w-10 h-10 rounded-full mr-4 object-cover">
                            <div>
                                <p class="font-semibold text-gray-800 dark:text-gray-200">Ahmad Fauzi</p>
                                <div class="text-yellow-400 flex items-center gap-1"><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i></div>
                            </div>
                        </div>
                        <blockquote class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed italic">"Prosesnya cepet banget, gak sampai 5 menit akun udah aktif. Recommended seller!"</blockquote>
                    </div>
                     <div class="bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700/50">
                        <div class="flex items-center mb-3">
                            <img src="data:image/jpeg;base64,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" alt="User Siti Nurhaliza" class="w-10 h-10 rounded-full mr-4 object-cover">
                            <div>
                                <p class="font-semibold text-gray-800 dark:text-gray-200">Siti Nurhaliza</p>
                                <div class="text-yellow-400 flex items-center gap-1"><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i></div>
                            </div>
                        </div>
                        <blockquote class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed italic">"Harganya paling murah di antara yang lain. Adminnya juga ramah banget. Pasti langganan di sini."</blockquote>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700/50">
                        <div class="flex items-center mb-3">
                            <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAFAAUAMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAADBAACBQYBB//EADsQAAIBAgMDBwoDBgYDAAAAAAECAwARBBIhBRMxQVEiYXGBkQYyUqGiscHR8BThI0LhJDVykrLxByRi/8QAGQEAAwEBAQAAAAAAAAAAAAAAAAECAwQF/8QAIhEAAgICAgICAwEAAAAAAAAAAQIAEQMhEjFBBBMiUWFx/2oADAMBAAIRAxEAPwD5y2p21u+1ua0KkC97gA1U2ps+s+a5oY94iXW58bWv8AVRtt7OXtXhE4KSLG1wQbG17HnS9L2PsvY+8I2wUqIAGV7m3dwtvVb0DZdPYWwyJJKs8Yd3aWJbhWJuVFybWNuFNJ2JspJJsU3aTPIHk+9bWwFhbluHhXvD8M3uT9V7/DMPyL8hU/q9u9U+Qo/V7d6p8hQA/wzD8i/IVfhmH5F+Qqf1e3eqfIUfq9u9U+QoAf4Zh+RfkKvhmH5F+QpD4Tt053w6C5J0i1ybk1Wdht+j/SoAh8Mw/IvyFV8Mw/IvyFQ3Y7fuJ8qpur2/dT5CgB/hmH5F+QoHGy8OwsYkI5EUg7Db91PlSbq9ugAIhAA/SoAmE2ZhpEMbxKyMLMrC4I4g1UOwNnEEmBEJ5Rsy/K1B6rb4B/lqP1W3fy0+QoH2GwtlYOFg8WFhjcWseVcADoDfjTYAAFgLAV5/Vbf/LT5Cj9Vt3qnyFAHuK9rn+rW71T5Cj9Xt3qnyFADwK8rn+r271T5Cj9Xt3qnyFADxSoO09j4HaLIcTGGePwXF1JJF7EXHEGkv1e3eqfIUfq9u9U+QoE2d7N2bs9nOFw6xtIAHZTfMBewPHhYmm5pD9Xt3qnyFH6vbvVfkKAJNeVz/AFm3+q/I0frNv9V+RoAeCva5/rNv9V+Ro/Wbf6r8jQA+aV7XP9Zt/qvyNH6zb/VfkaAHsle1z/Wbf6r8jR+s2/1X5GgB7JXtc/1m3+qvyNH6zb/VfkaAHsle1z/Wbf6r8jR+s2/1X5GgB7JXtc/1m3+qvyNH6zb/VfkaAHsle1z/AFm3+qvyNH6zb/VfkaAHsle1z/W7f6n8jR+t2/1P5GgB7JXtc/1u3+p/I0frdv9T+RoAeyV7XP8AW7f6n8jR+t2/1P5GgB7JXtc/1u3+p/I0frdv9T+RoAeyV7XP9bt/qfyNH63b/U/kaAeyV7XP9bt/qfyNH63b/U/kaAeyV7XP9bt/qfyNH63b/U/kaAeyV7XP8Abt/qfyNH63b/U/kaAP//Z" alt="User Budi Santoso" class="w-10 h-10 rounded-full mr-4 object-cover">
                            <div>
                                <p class="font-semibold text-gray-800 dark:text-gray-200">Budi Santoso</p>
                                <div class="text-yellow-400 flex items-center gap-1"><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="fas fa-star text-xs"></i><i class="far fa-star text-xs"></i></div>
                            </div>
                        </div>
                        <blockquote class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed italic">"Udah dua kali beli akun Canva di sini, garansinya beneran full setahun. Mantap!"</blockquote>
                    </div>
                </div>
            </section>

            <section class="mt-16">
                 <h2 class="text-2xl font-bold text-center mb-6 text-gray-900 dark:text-white">Tanya Jawab</h2>
                 <div class="space-y-3">
                    <details class="bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700/50 group transition-all duration-300">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer text-gray-800 dark:text-gray-200">
                            Bagaimana cara memesan?
                            <i class="fas fa-chevron-down faq-arrow text-gray-500 group-open:text-blue-500"></i>
                        </summary>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-4 leading-relaxed">
                            Pilih produk, klik tombol <span class="font-bold text-blue-600">+</span>, lalu pilih "Ke Keranjang" jika ingin membeli beberapa item, atau "Order Langsung" untuk proses cepat via WhatsApp. Pesanan akan diarahkan ke admin kami untuk proses pembayaran dan aktivasi.
                        </p>
                    </details>
                    <details class="bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700/50 group transition-all duration-300">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer text-gray-800 dark:text-gray-200">
                            Apakah akun ini legal dan aman?
                            <i class="fas fa-chevron-down faq-arrow text-gray-500 group-open:text-blue-500"></i>
                        </summary>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-4 leading-relaxed">
                            Tentu saja! Semua akun dan produk yang kami jual adalah 100% legal dan didapatkan melalui cara yang sah. Kami memberikan garansi penuh sesuai durasi yang Anda pilih.
                        </p>
                    </details>
                    <details class="bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700/50 group transition-all duration-300">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer text-gray-800 dark:text-gray-200">
                            Metode pembayaran apa saja yang diterima?
                            <i class="fas fa-chevron-down faq-arrow text-gray-500 group-open:text-blue-500"></i>
                        </summary>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-4 leading-relaxed">
                            Kami menerima pembayaran melalui transfer Bank (BCA, Mandiri, BRI) dan E-Wallet (Dana, OVO, GoPay, ShopeePay). Detail akan diinformasikan oleh admin saat proses checkout di WhatsApp.
                        </p>
                    </details>
                 </div>
            </section>
        </div>
    </div>

    <div id="addToCartModal" role="dialog" aria-modal="true" class="modal fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-40 p-4">
        <div class="modal-content bg-white dark:bg-gray-800 rounded-2xl w-full max-w-sm p-6 flex flex-col space-y-4 shadow-2xl max-h-[90vh] overflow-y-auto"></div>
    </div>

    <div id="cartModal" role="dialog" aria-modal="true" class="modal fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
        <div class="modal-content bg-white dark:bg-gray-800 rounded-2xl w-full max-w-sm p-5 flex flex-col h-[90vh] max-h-[700px] shadow-2xl"></div>
    </div>

    <footer class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 p-3 z-10">
         <div class="flex justify-center items-center gap-4 mb-2 text-gray-500 dark:text-gray-400">
            <a href="#" class="hover:text-blue-500"><i class="fab fa-instagram fa-lg"></i></a>
            <a href="#" class="hover:text-blue-500"><i class="fab fa-facebook fa-lg"></i></a>
            <a href="https://wa.me/6289603659756" class="hover:text-green-500"><i class="fab fa-whatsapp fa-lg"></i></a>
            <a href="#" class="hover:text-blue-500"><i class="fab fa-telegram fa-lg"></i></a>
        </div>
        <p class="text-xs text-gray-500 dark:text-gray-400 text-center">© 2025 Dmaz Alyxers. Dibuat dengan ❤️ oleh Admin.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {

        const App = {
            state: {
                products: [
                    // --- REVISI: Menambahkan properti 'image' ---
                    { name: "YOUTUBE", title: "Youtube Premium", stock: "99+", rating: "4.9", category: "app", icon: "fab fa-youtube", image: 'images/youtube.png',
                        description: "Nikmati jutaan video tanpa iklan, putar di latar belakang, dan akses YouTube Music Premium. Pengalaman menonton dan mendengarkan musik tanpa gangguan.",
                        testimonials: ["Akunnya aman, bisa dipakai sekeluarga. Nonton jadi nyaman tanpa iklan sama sekali.", "Mantap, bisa download video buat ditonton offline. Berguna banget pas lagi di luar."],
                        variants: [{ name: "1 Bulan", price: 1000 }, { name: "4 Bulan", price: 40000 }, { name: "1 Tahun (Family Head)", price: 150000 }], isBestSeller: true },
                    { name: "SPOTIFY", title: "Spotify Premium", stock: "50+", rating: "5.0", category: "app", icon: "fab fa-spotify", image: 'images/spotify.png',
                        description: "Dengarkan musik favoritmu tanpa batas. Lewati lagu sepuasnya, nikmati kualitas audio terbaik, dan download musik untuk didengarkan offline.",
                        testimonials: ["Playlist-nya jadi asik, bisa skip lagu sesuka hati. Wajib punya buat yang suka musik.", "Prosesnya cepet banget, gak sampai 5 menit akun udah aktif. Recommended seller! - Ahmad F."],
                        variants: [{ name: "1 Bulan", price: 16500 }, { name: "3 Bulan", price: 45000 }] },
                    { name: "CANVA", title: "Canva Pro", stock: "80+", rating: "5.0", category: "app", icon: "fas fa-palette", image: 'images/canva.png',
                        description: "Akses semua fitur premium Canva untuk membuat desain profesional dengan mudah. Jutaan template, foto, dan font siap pakai.",
                        testimonials: ["Udah dua kali beli akun Canva di sini, garansinya beneran full setahun. Mantap! - Budi S.", "Desain buat tugas jadi cepet banget pake Canva Pro dari sini. Harganya juga cocok buat kantong mahasiswa."],
                        variants: [{ name: "1 Bulan", price: 25000 }, { name: "1 Tahun", price: 150000 }], isBestSeller: true },
                    { name: "NETFLIX", title: "Netflix Premium UHD", stock: "99+", rating: "4.7", category: "app", icon: "N", image: 'images/netflix.png',
                        description: "Streaming ribuan film dan serial TV populer dengan kualitas terbaik hingga Ultra HD (4K). Buat profil pribadimu dan nikmati tontonan di semua perangkat.",
                        testimonials: ["Kualitas UHD-nya jernih banget, nonton di TV jadi seru. Gak pernah ada masalah sama akunnya.", "Adminnya fast response, kalau ada kendala langsung dibantu. Top!"],
                        variants: [{ name: "Sharing 1 Profile", price: 35750 }, { name: "Private 1 Bulan", price: 120000 }] },
                    { name: "DISCORD", title: "Discord Nitro", stock: "30+", rating: "4.8", category: "app", icon: "fab fa-discord", image: 'images/discord.png',
                        description: "Tingkatkan pengalaman server Discord-mu dengan Nitro. Dapatkan emoji kustom di mana saja, upload file lebih besar, dan streaming dengan kualitas HD.",
                        testimonials: ["Akhirnya bisa pamer emoji custom di server lain. Streaming ke teman juga jadi lancar jaya."],
                        variants: [{ name: "Nitro Basic (1 Bulan)", price: 45000 }, { name: "Nitro Boost (1 Bulan)", price: 99000 }] },
                    { name: "VPN", title: "VPN Premium", stock: "99+", rating: "4.9", category: "app", icon: "fas fa-shield-halved", image: 'images/vpn.png',
                        description: "Amankan koneksi internetmu dan akses konten dari seluruh dunia. Dengan server premium acak, privasimu lebih terjamin dan koneksi lebih cepat.",
                        testimonials: ["VPN-nya kenceng, buat streaming atau main game lancar. Harganya juga murah banget untuk setahun."],
                        variants: [{ name: "1 Bulan (Random)", price: 30000 }, { name: "1 Tahun (Random)", price: 250000 }], isNew: true },
                    { name: "MICROSOFT 365", title: "Microsoft 365", stock: "50+", rating: "4.9", category: "app", icon: "fab fa-windows", image: 'images/microsoft.png',
                        description: "Dapatkan akses ke aplikasi Office premium (Word, Excel, PowerPoint) dan penyimpanan cloud OneDrive sebesar 1TB. Cocok untuk produktivitas kerja dan kuliah.",
                        testimonials: ["Penyimpanan 1TB-nya berguna banget buat backup data. Lisensi original, jadi aman buat kerjaan."],
                        variants: [{ name: "Family Plan (1 Tahun)", price: 90000 }] },
                    { name: "ADOBE", title: "Adobe Creative Cloud", stock: "10+", rating: "4.8", category: "app", icon: "fas fa-camera-retro", image: 'images/adobe.png',
                        description: "Buka potensimu dengan akses ke semua aplikasi Adobe Creative Cloud. Mulai dari Photoshop, Illustrator, Premiere Pro, dan masih banyak lagi.",
                        testimonials: ["Buat desainer atau editor, ini deal terbaik. Bisa akses semua aplikasi Adobe dengan harga miring."],
                        variants: [{ name: "All Apps (1 Bulan)", price: 180000 }], isNew: true },
                    { name: "MOBILE LEGENDS", title: "MLBB Diamonds", stock: "99+", rating: "5.0", category: "game", icon: "fas fa-gem", image: 'images/mlbb.png',
                        description: "Top up Diamond Mobile Legends dengan cepat dan aman. Proses instan via ID, tidak perlu login. Jadilah yang terkuat di Land of Dawn!",
                        testimonials: ["Diamond langsung masuk, ga pake lama. Harganya paling murah di antara yang lain. - Siti N.", "Udah sering top up di sini, selalu amanah dan prosesnya kilat."],
                        variants: [{ name: "86 Diamonds", price: 25000 }, { name: "172 Diamonds", price: 50000 }, { name: "514 Diamonds", price: 135000 }], isBestSeller: true },
                    { name: "FREE FIRE", title: "FF Diamonds", stock: "99+", rating: "4.9", category: "game", icon: "fas fa-fire", image: 'images/freefire.png',
                        description: "Isi ulang Diamond Free Fire secara instan dan murah. Cukup masukkan ID game-mu dan nikmati item-item keren di dalam game.",
                        testimonials: ["Beli diamond di sini lebih untung daripada di game langsung. Prosesnya juga gak ribet."],
                        variants: [{ name: "140 Diamonds", price: 20000 }, { name: "355 Diamonds", price: 50000 }, { name: "720 Diamonds", price: 95000 }] },
                    { name: "GENSHIN IMPACT", title: "Genesis Crystals", stock: "99+", rating: "5.0", category: "game", icon: "fas fa-star", image: 'images/genshin.png',
                        description: "Dapatkan Genesis Crystals dan Blessing of the Welkin Moon untuk Gacha karakter dan senjata impianmu. Transaksi aman dan terpercaya.",
                        testimonials: ["Welkin bulanan di sini paling murah. Adminnya juga ramah banget. Pasti langganan di sini."],
                        variants: [{ name: "Blessing of the Welkin", price: 75000 }, { name: "300 + 30 GC", price: 79000 }] },
                    { name: "VALORANT", title: "Valorant Points", stock: "99+", rating: "4.9", category: "game", icon: "fas fa-crosshairs", image: 'images/valorant.png',
                        description: "Beli Valorant Points untuk mendapatkan skin senjata keren dan Battle Pass terbaru. Proses cepat, legal, dan anti-ban.",
                        testimonials: ["Points langsung terisi, bisa langsung beli skin incaran. Thanks min!"],
                        variants: [{ name: "300 Points", price: 32000 }, { name: "625 Points", price: 60000 }], isNew: true },
                    { name: "DISNEY+", title: "Disney+ Hotstar", stock: "99+", rating: "4.8", category: "streaming", icon: "fas fa-magic", image: 'images/disneyplus.png',
                        description: "Tonton semua film dan serial dari Disney, Pixar, Marvel, Star Wars, dan National Geographic dalam satu aplikasi. Pilihan tontonan keluarga terbaik.",
                        testimonials: ["Langganan setahun lebih hemat, bisa nonton Marvel sepuasnya. Akunnya lancar jaya."],
                        variants: [{ name: "1 Bulan", price: 25000 }, { name: "1 Tahun", price: 150000 }] },
                    { name: "HBO GO", title: "HBO GO", stock: "50+", rating: "4.7", category: "streaming", icon: "fas fa-crown", image: 'images/hbo.png',
                        description: "Nikmati serial TV pemenang penghargaan seperti Game of Thrones dan House of the Dragon, serta film-film blockbuster dari Warner Bros.",
                        testimonials: ["Akhirnya bisa nonton House of the Dragon legal tanpa buffering. Mantap!"],
                        variants: [{ name: "1 Bulan", price: 30000 }] },
                    { name: "VIU", title: "Viu Premium", stock: "99+", rating: "4.9", category: "streaming", icon: "fas fa-play-circle", image: 'images/viu.png',
                        description: "Platform streaming terbaik untuk para pecinta drama Korea, variety show, dan konten Asia lainnya. Selalu update dengan episode terbaru.",
                        testimonials: ["Nonton drakor jadi lancar tanpa iklan. Pilihan dramanya juga lengkap banget."],
                        variants: [{ name: "1 Bulan", price: 20000 }], isNew: true }
                ],
                cart: [],
                filter: { category: 'Semua', search: '', sort: 'default' },
                discount: { code: null, rate: 0 },
            },

            DOMElements: {
                productGrid: document.getElementById('productGrid'),
                skeletonLoader: document.getElementById('skeleton-loader'),
                searchInput: document.getElementById('searchInput'),
                sortControl: document.getElementById('sortControl'),
                noResultsEl: document.getElementById('no-results'),
                cartBadge: document.getElementById('cartBadge'),
                toastContainer: document.getElementById('toast-container'),
                modals: {
                    add: document.getElementById('addToCartModal'),
                    cart: document.getElementById('cartModal'),
                },
                buttons: {
                    openCart: document.getElementById('openCartBtn'),
                    themeToggle: document.getElementById('theme-toggle'),
                },
                categoryTabs: document.getElementById('categoryTabs'),
                themeIcons: {
                    light: document.getElementById('theme-icon-light'),
                    dark: document.getElementById('theme-icon-dark'),
                },
            },

            init() {
                this.theme.apply(this.theme.load());
                this.cart.load();
                this.ui.renderCategories();
                this.listeners.setup();
                this.ui.setupHeroSlider();

                this.DOMElements.skeletonLoader.style.display = 'grid';
                setTimeout(() => {
                    this.ui.renderProducts();
                }, 600);
            },
            
            helpers: {
                formatPrice: (price) => new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(price),
            },
            
            ui: {
                renderProducts() {
                    const { productGrid, skeletonLoader, noResultsEl } = App.DOMElements;
                    productGrid.innerHTML = '';
                    skeletonLoader.style.display = 'none';

                    let productsToRender = App.state.products.filter(p => {
                        const { category, search } = App.state.filter;
                        const categoryMatch = category === 'Semua' || p.category.toLowerCase() === category.toLowerCase();
                        const searchMatch = search ? (p.name.toLowerCase().includes(search) || p.title.toLowerCase().includes(search)) : true;
                        return categoryMatch && searchMatch;
                    });
                    
                    const sortMethod = App.state.filter.sort;
                    if(sortMethod === 'price-asc') productsToRender.sort((a,b) => a.variants[0].price - b.variants[0].price);
                    if(sortMethod === 'price-desc') productsToRender.sort((a,b) => b.variants[0].price - a.variants[0].price);
                    if(sortMethod === 'rating-desc') productsToRender.sort((a,b) => parseFloat(b.rating) - parseFloat(a.rating));

                    noResultsEl.classList.toggle('hidden', productsToRender.length > 0);
                    productGrid.classList.toggle('hidden', productsToRender.length === 0);

                    productsToRender.forEach((p, index) => { 
                        const card = document.createElement('div');
                        card.className = 'product-card bg-white dark:bg-gray-800 rounded-2xl shadow-lg shadow-gray-500/5 dark:shadow-black/10 flex flex-col border border-gray-200/50 dark:border-gray-700/50';
                        card.dataset.title = p.title; 
                        card.style.animationDelay = `${index * 50}ms`;
                        
                        // --- REVISI: Logika diubah untuk menampilkan gambar ---
                        const iconHtml = p.image 
                            ? `<img src="${p.image}" alt="${p.title}" class="w-full h-full object-contain">` 
                            : (p.name === 'NETFLIX' ? `<span class="text-red-500 font-black text-4xl">${p.icon}</span>` : `<i class="${p.icon} text-white text-3xl"></i>`);
                        
                        let badgeHtml = '';
                        if(p.isBestSeller) badgeHtml = '<div class="product-badge best-seller">Best Seller</div>';
                        else if (p.isNew) badgeHtml = '<div class="product-badge">New</div>';

                        card.innerHTML = `
                            ${badgeHtml}
                            <div class="p-4 flex flex-col items-start">
                                <div class="product-icon w-14 h-14 rounded-xl flex items-center justify-center mb-3 shadow-lg bg-white dark:bg-gray-700 p-1">${iconHtml}</div>
                                <h3 class="font-bold text-base text-gray-800 dark:text-gray-100 h-10">${p.title}</h3>
                                <div class="flex items-center text-xs text-gray-500 dark:text-gray-400 mt-1">
                                    <i class="fas fa-star text-yellow-400 mr-1"></i><span class="font-medium">${p.rating}</span>
                                    <span class="mx-1.5">&middot;</span>
                                    <i class="fas fa-box-open mr-1 text-green-500"></i><span>Stok: ${p.stock}</span>
                                 </div>
                            </div>
                            <div class="p-4 pt-2 mt-auto flex items-center justify-between z-10">
                                <div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Mulai</div>
                                    <div class="text-lg font-bold text-blue-600 dark:text-blue-400">${App.helpers.formatPrice(p.variants[0].price)}</div>
                                </div>
                                <button class="add-to-cart-btn bg-gradient-to-br from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white rounded-lg w-12 h-10 text-base font-semibold flex items-center justify-center transition-all duration-300 transform hover:scale-105 active:scale-95">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>`;
                        productGrid.appendChild(card);
                    });
                },
                renderCategories() {
                    const categories = ['Semua', ...[...new Set(App.state.products.map(p => p.category))].sort()];
                    App.DOMElements.categoryTabs.innerHTML = '';
                    categories.forEach(category => {
                        const button = document.createElement('button');
                        const isActive = App.state.filter.category === category;
                        button.className = `category-tab-btn capitalize text-sm font-medium px-4 py-2 rounded-full transition-colors duration-300 whitespace-nowrap ${isActive ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-700'}`;
                        button.textContent = category;
                        button.dataset.category = category;
                        App.DOMElements.categoryTabs.appendChild(button);
                    });
                },
                renderAddToCartModal(productData) {
                    const modal = App.DOMElements.modals.add;
                    const modalContent = modal.querySelector('.modal-content');
                    
                    modalContent.innerHTML = `
                        <div class="flex-shrink-0">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold text-lg text-gray-900 dark:text-white">Detail Pesanan</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">${productData.title}</p>
                                </div>
                                <button class="close-modal-btn text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 text-2xl transition">&times;</button>
                            </div>
                        </div>
                        <div class="space-y-4 flex-shrink-0">
                            <div>
                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Pilih Varian</label>
                                <select id="modalVariantSelect" class="w-full mt-1 p-2.5 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    ${productData.variants.map(v => `<option value="${v.price}" data-name="${v.name}">${v.name} (${App.helpers.formatPrice(v.price)})</option>`).join('')}
                                </select>
                            </div>
                            <div class="flex justify-between items-center">
                                <div>
                                    <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Jumlah</label>
                                    <div class="flex items-center mt-1">
                                        <button id="decreaseQty" class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-bold w-9 h-9 rounded-l-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition active:scale-90">-</button>
                                        <input type="text" value="1" id="modalQuantity" class="w-12 h-9 text-center border-t border-b border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none" readonly>
                                        <button id="increaseQty" class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-bold w-9 h-9 rounded-r-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition active:scale-90">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Harga</label>
                                    <p id="modalProductPrice" class="font-bold text-xl text-blue-600 dark:text-blue-400"></p>
                                </div>
                            </div>
                            <div>
                                <label for="modalNotes" class="text-sm font-medium text-gray-600 dark:text-gray-400">Catatan (Opsional)</label>
                                <input type="text" id="modalNotes" placeholder="Misal: Email untuk Canva..." class="w-full mt-1 p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500">
                            </div>

                            <div id="tab-container" class="pt-2">
                                <div class="border-b border-gray-200 dark:border-gray-700 flex">
                                    <button type="button" class="tab-button active" data-tab="deskripsi">Deskripsi</button>
                                    <button type="button" class="tab-button" data-tab="ulasan">Ulasan</button>
                                </div>
                                <div>
                                    <div id="deskripsi-panel" class="tab-panel active">
                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">${productData.description || 'Tidak ada deskripsi untuk produk ini.'}</p>
                                    </div>
                                    <div id="ulasan-panel" class="tab-panel">
                                        ${productData.testimonials && productData.testimonials.length > 0 ? `
                                            <div class="space-y-3">
                                                ${productData.testimonials.map(testimonial => `
                                                    <blockquote class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed italic border-l-2 border-blue-300 dark:border-blue-700 pl-3">"${testimonial}"</blockquote>
                                                `).join('')}
                                            </div>
                                        ` : '<p class="text-sm text-gray-500 dark:text-gray-400">Belum ada ulasan untuk produk ini.</p>'}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3 pt-2 flex-shrink-0">
                            <button id="addToCartBtn" class="w-full bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200/70 dark:hover:bg-blue-800/50 text-blue-700 dark:text-blue-300 font-bold py-3 rounded-lg flex items-center justify-center transition-all duration-300 transform hover:scale-105 active:scale-95 text-sm">
                                <i class="fas fa-cart-plus mr-2"></i>Ke Keranjang
                            </button>
                            <button id="directOrderBtn" class="w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold py-3 rounded-lg flex items-center justify-center transition-all duration-300 transform hover:scale-105 active:scale-95 text-sm">
                                <i class="fab fa-whatsapp mr-2"></i>Order Langsung
                            </button>
                        </div>`;
                    
                    const updatePrice = () => {
                        const variantSelect = modalContent.querySelector('#modalVariantSelect');
                        const qtyInput = modalContent.querySelector('#modalQuantity');
                        const selectedOption = variantSelect.options[variantSelect.selectedIndex];
                        const price = parseFloat(selectedOption.value);
                        const quantity = parseInt(qtyInput.value);
                        modal.dataset.price = price;
                        modal.dataset.productName = productData.title;
                        modal.dataset.variantName = selectedOption.dataset.name;
                        modalContent.querySelector('#modalProductPrice').textContent = App.helpers.formatPrice(price * quantity);
                    };

                    modal.addEventListener('change', e => { if(e.target.id === 'modalVariantSelect') updatePrice() });
                    modal.addEventListener('click', e => { if(e.target.id === 'decreaseQty' || e.target.id === 'increaseQty') updatePrice() });

                    const tabContainer = modalContent.querySelector('#tab-container');
                    if (tabContainer) {
                        const tabButtons = tabContainer.querySelectorAll('.tab-button');
                        const tabPanels = tabContainer.querySelectorAll('.tab-panel');

                        tabButtons.forEach(button => {
                            button.addEventListener('click', () => {
                                tabButtons.forEach(btn => btn.classList.remove('active'));
                                tabPanels.forEach(panel => panel.classList.remove('active'));

                                button.classList.add('active');
                                const targetPanel = tabContainer.querySelector(`#${button.dataset.tab}-panel`);
                                if(targetPanel) targetPanel.classList.add('active');
                            });
                        });
                    }

                    updatePrice();
                    this.openModal(modal);
                },
                renderCartView() {
                    const modal = App.DOMElements.modals.cart;
                    const modalContent = modal.querySelector('.modal-content');
                    const subtotal = App.state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                    const discountAmount = subtotal * App.state.discount.rate;
                    const total = subtotal - discountAmount;
                    
                    modalContent.innerHTML = `
                        <div class="flex justify-between items-center mb-4 flex-shrink-0">
                            <h3 class="font-bold text-lg flex items-center text-gray-900 dark:text-white"><i class="fas fa-shopping-cart text-blue-500 mr-2"></i>Keranjang Anda</h3>
                            <button class="close-modal-btn text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 text-2xl transition">&times;</button>
                        </div>
                        <div class="flex-grow overflow-y-auto space-y-3 pr-1.5 -mr-1.5">
                            ${App.state.cart.length > 0 ? App.state.cart.map((item, index) => `
                                <div class="flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                                    <div class="flex-grow">
                                        <p class="font-bold text-sm text-gray-800 dark:text-gray-200">${item.name}</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">${item.variant}</p>
                                        ${item.notes ? `<p class="text-xs text-yellow-600 dark:text-yellow-400 mt-1 italic">Catatan: ${item.notes}</p>` : ''}
                                        <p class="text-sm font-semibold text-blue-600 dark:text-blue-400 mt-1.5">${App.helpers.formatPrice(item.price)}</p>
                                    </div>
                                    <div class="flex flex-col items-end gap-2">
                                        <div class="flex items-center">
                                            <input type="number" value="${item.quantity}" min="1" data-index="${index}" class="cart-qty-input w-12 text-center border rounded-md bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 text-sm py-1">
                                            <button data-index="${index}" class="remove-cart-item text-red-500 hover:text-red-700 transition ml-3 text-lg"><i class="fas fa-trash-alt"></i></button>
                                        </div>
                                        <p class="font-bold text-gray-800 dark:text-gray-200 text-sm">${App.helpers.formatPrice(item.price * item.quantity)}</p>
                                    </div>
                                </div>
                            `).join('') : `
                                <div class="text-center py-10 flex flex-col justify-center items-center h-full">
                                    <figure class="w-40 mx-auto mb-4 text-gray-300 dark:text-gray-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49A.996.996 0 0 0 20.01 4H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.24 17 6.5 17H20v-2H6.5c-.33 0-.54-.25-.4-.5l.93-1.68.94-2h7.02zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
                                    </figure>
                                    <h3 class="font-bold text-lg text-gray-800 dark:text-gray-200">Keranjang Kosong</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Ayo, isi dengan produk favoritmu!</p>
                                </div>
                            `}
                        </div>
                        ${App.state.cart.length > 0 ? `
                        <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex-shrink-0">
                            <div class="flex gap-2 mb-3">
                                <input type="text" id="couponInput" placeholder="Masukkan Kode Kupon" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 text-sm">
                                <button id="applyCouponBtn" class="bg-gray-700 hover:bg-gray-800 dark:bg-gray-200 dark:hover:bg-gray-300 text-white dark:text-black font-bold py-2 px-4 rounded-lg transition text-sm">Apply</button>
                            </div>
                            <div class="space-y-1 text-sm">
                                <div class="flex justify-between items-center text-gray-600 dark:text-gray-400"><span>Subtotal</span><span>${App.helpers.formatPrice(subtotal)}</span></div>
                                ${App.state.discount.rate > 0 ? `<div class="flex justify-between items-center text-green-600 dark:text-green-400"><span>Diskon (${App.state.discount.code})</span><span>-${App.helpers.formatPrice(discountAmount)}</span></div>` : ''}
                                <div class="flex justify-between items-center font-bold text-base text-gray-900 dark:text-white pt-1 border-t border-dashed dark:border-gray-600 mt-2"><span>Total</span><span>${App.helpers.formatPrice(total)}</span></div>
                            </div>
                            <div class="text-right mt-2"><button id="clearCartBtn" class="text-xs text-red-500 hover:underline font-medium">Kosongkan Keranjang</button></div>
                            <button id="checkoutBtn" class="w-full mt-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-3 rounded-lg flex items-center justify-center transition-all duration-300 transform hover:scale-105 active:scale-95">
                                <i class="fab fa-whatsapp mr-2"></i> Checkout via WhatsApp
                            </button>
                        </div>
                        ` : ''}
                    `;
                    this.openModal(modal);
                },
                updateCartBadge() {
                    const totalItems = App.state.cart.reduce((sum, item) => sum + item.quantity, 0);
                    App.DOMElements.cartBadge.textContent = totalItems;
                    App.DOMElements.cartBadge.classList.toggle('scale-0', totalItems === 0);
                },
                showToast(message, icon = 'fa-check-circle', color = 'bg-green-500') {
                    const toast = document.createElement('div');
                    toast.className = `toast-notification ${color} text-white text-sm font-semibold p-3 rounded-xl shadow-lg flex items-center gap-3`;
                    toast.innerHTML = `<i class="fas ${icon}"></i> <span>${message}</span>`;
                    App.DOMElements.toastContainer.appendChild(toast);
                    setTimeout(() => toast.remove(), 3500);
                },
                openModal(modal) {
                    modal.classList.add('active');
                    document.body.classList.add('modal-open');
                },
                closeModal(modal) {
                    modal.classList.remove('active');
                    if (!document.querySelector('.modal.active')) document.body.classList.remove('modal-open');
                },
                flyToCartAnimation(startElement) {
                    const flyingIcon = startElement.cloneNode(true);
                    const startRect = startElement.getBoundingClientRect();
                    const cartRect = App.DOMElements.cartBadge.getBoundingClientRect();
                    
                    flyingIcon.classList.add('fly-to-cart');
                    document.body.appendChild(flyingIcon);
                    
                    flyingIcon.style.cssText = `
                        position: absolute;
                        left: ${startRect.left}px;
                        top: ${startRect.top}px;
                        width: ${startRect.width}px;
                        height: ${startRect.height}px;
                        z-index: 9999;
                    `;

                    requestAnimationFrame(() => {
                        flyingIcon.style.transform = `translate(${cartRect.left - startRect.left}px, ${cartRect.top - startRect.top}px) scale(0.3)`;
                        flyingIcon.style.opacity = '0';
                    });

                    setTimeout(() => {
                        flyingIcon.remove();
                        App.DOMElements.cartBadge.classList.add('transform', 'scale-125', 'transition-transform', 'duration-200');
                        setTimeout(() => App.DOMElements.cartBadge.classList.remove('scale-125'), 200);
                    }, 800);
                },
                
                setupHeroSlider() {
                    const swiper = new Swiper('.hero-slider', {
                        loop: true,
                        autoplay: {
                            delay: 5000,
                            disableOnInteraction: false,
                        },
                        pagination: {
                            el: '.swiper-pagination',
                            clickable: true,
                        },
                        navigation: {
                            nextEl: '.swiper-button-next',
                            prevEl: '.swiper-button-prev',
                        },
                    });
                }
            },

            cart: {
                add(item, startElement) {
                    const existingItem = App.state.cart.find(i => i.id === item.id && i.notes === item.notes);
                    if (existingItem) {
                        existingItem.quantity += item.quantity;
                        App.ui.showToast(`Jumlah "${item.name}" diperbarui.`);
                    } else {
                        App.state.cart.push(item);
                        App.ui.showToast(`"${item.name}" ditambahkan.`);
                    }
                    if (startElement) App.ui.flyToCartAnimation(startElement);
                    this.save();
                },
                updateQty(index, newQty) {
                    if (newQty < 1) newQty = 1;
                    App.state.cart[index].quantity = newQty;
                    this.save();
                    App.ui.renderCartView();
                },
                remove(index) {
                    App.state.cart.splice(index, 1);
                    this.save();
                    App.ui.renderCartView();
                    App.ui.showToast('Item dihapus dari keranjang.', 'fa-trash-alt', 'bg-red-500');
                },
                clear() {
                    App.state.cart = [];
                    App.state.discount = { code: null, rate: 0 };
                    this.save();
                    App.ui.renderCartView();
                    App.ui.showToast('Keranjang telah dikosongkan.', 'fa-trash', 'bg-blue-500');
                },
                applyCoupon(code) {
                    if (code.toUpperCase() === 'DMAZALYXERS10') {
                        App.state.discount = { code: code.toUpperCase(), rate: 0.10 };
                        App.ui.showToast('Kupon berhasil diterapkan!', 'fa-tags', 'bg-green-500');
                    } else {
                        App.state.discount = { code: null, rate: 0 };
                        App.ui.showToast('Kupon tidak valid.', 'fa-exclamation-circle', 'bg-red-500');
                    }
                    App.ui.renderCartView();
                },
                save() {
                    localStorage.setItem('dmazAlyxersCart', JSON.stringify(App.state.cart));
                    App.ui.updateCartBadge();
                },
                load() {
                    App.state.cart = JSON.parse(localStorage.getItem('dmazAlyxersCart') || '[]');
                    App.ui.updateCartBadge();
                }
            },

            theme: {
                apply(theme) {
                    const isDark = theme === 'dark';
                    document.documentElement.classList.toggle('dark', isDark);
                    document.documentElement.classList.toggle('light', !isDark);
                    App.DOMElements.themeIcons.dark.style.display = isDark ? 'inline-block' : 'none';
                    App.DOMElements.themeIcons.light.style.display = isDark ? 'none' : 'inline-block';
                },
                toggle() {
                    const newTheme = document.documentElement.classList.contains('light') ? 'dark' : 'light';
                    localStorage.setItem('theme', newTheme);
                    this.apply(newTheme);
                },
                load() {
                    const savedTheme = localStorage.getItem('theme');
                    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    return savedTheme || (systemPrefersDark ? 'dark' : 'light');
                }
            },
            
            checkout: {
                process(isDirect = false) {
                    const noWhatsapp = "6289603659756";
                    let total = 0;
                    let pesan;
                    const header = "Halo Dmaz Alyxers, saya mau order:\n====================\n\n";
                    let footer = "\n====================\nMohon info untuk proses selanjutnya. Terima kasih 🙏";

                    if (isDirect) {
                        const modal = App.DOMElements.modals.add;
                        const productName = modal.dataset.productName;
                        const variantName = modal.dataset.variantName;
                        const price = parseFloat(modal.dataset.price);
                        const quantity = parseInt(modal.querySelector('#modalQuantity').value);
                        const notes = modal.querySelector('#modalNotes').value.trim();
                        total = price * quantity;
                        pesan = `${header}*Produk:* ${productName}\n*Varian:* ${variantName}\n*Jumlah:* ${quantity}\n${notes ? `*Catatan:* ${notes}\n` : ''}*Harga:* ${App.helpers.formatPrice(total)}${footer}`;
                        App.ui.closeModal(modal);
                    } else {
                        if (App.state.cart.length === 0) return;
                        
                        let cartDetails = App.state.cart.map(item => {
                            const subtotal = item.price * item.quantity;
                            return `*Produk:* ${item.name} (${item.variant})\n*Jumlah:* ${item.quantity} x ${App.helpers.formatPrice(item.price)}\n${item.notes ? `*Catatan:* ${item.notes}\n` : ''}*Subtotal:* ${App.helpers.formatPrice(subtotal)}`;
                        }).join('\n\n');
                        
                        const subtotal = App.state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                        const discountAmount = subtotal * App.state.discount.rate;
                        const finalTotal = subtotal - discountAmount;
                        
                        let totalSection = `\n*Subtotal:* ${App.helpers.formatPrice(subtotal)}`;
                        if(App.state.discount.rate > 0) {
                            totalSection += `\n*Diskon (${App.state.discount.code}):* -${App.helpers.formatPrice(discountAmount)}`;
                        }
                        totalSection += `\n*TOTAL PESANAN:* ${App.helpers.formatPrice(finalTotal)}`;
                        
                        pesan = `${header}${cartDetails}\n\n${totalSection}${footer}`;
                        
                        App.cart.clear();
                        App.ui.closeModal(App.DOMElements.modals.cart);
                    }
                    window.open(`https://wa.me/${noWhatsapp}?text=${encodeURIComponent(pesan)}`, '_blank');
                }
            },

            listeners: {
                setup() {
                    document.body.addEventListener('click', this.handleBodyClick);
                    App.DOMElements.searchInput.addEventListener('input', () => { App.state.filter.search = App.DOMElements.searchInput.value.toLowerCase(); App.ui.renderProducts(); });
                    App.DOMElements.sortControl.addEventListener('change', () => { App.state.filter.sort = App.DOMElements.sortControl.value; App.ui.renderProducts(); });
                    App.DOMElements.buttons.themeToggle.addEventListener('click', () => App.theme.toggle());
                    App.DOMElements.buttons.openCart.addEventListener('click', () => App.ui.renderCartView());
                    
                    App.DOMElements.modals.cart.addEventListener('input', e => {
                        if (e.target.classList.contains('cart-qty-input')) {
                            App.cart.updateQty(e.target.dataset.index, parseInt(e.target.value));
                        }
                    });
                },
                handleBodyClick(e) {
                    const target = e.target;
                    
                    if (target.closest('.add-to-cart-btn')) {
                        const card = target.closest('.product-card');
                        const productData = App.state.products.find(p => p.title === card.dataset.title);
                        if (productData) App.ui.renderAddToCartModal(productData);
                    }
                    
                    else if (target.closest('.category-tab-btn')) {
                        App.state.filter.category = target.closest('.category-tab-btn').dataset.category;
                        App.ui.renderProducts();
                        App.ui.renderCategories();
                    }
                    
                    else if (target.closest('.category-direct-link')) {
                        const category = target.closest('.category-direct-link').dataset.category;
                        App.state.filter.category = category;
                        App.ui.renderProducts();
                        App.ui.renderCategories();
                        document.getElementById('productGrid').scrollIntoView({ behavior: 'smooth' });
                    }
                    
                    const parentModal = target.closest('.modal');
                    if (parentModal) {
                        if (target.closest('.close-modal-btn')) App.ui.closeModal(parentModal);
                        if (target.id === 'decreaseQty') { let qty = parseInt(parentModal.querySelector('#modalQuantity').value); if (qty > 1) parentModal.querySelector('#modalQuantity').value = qty - 1; }
                        if (target.id === 'increaseQty') parentModal.querySelector('#modalQuantity').value = parseInt(parentModal.querySelector('#modalQuantity').value) + 1;
                        if (target.id === 'addToCartBtn') App.listeners.handleAddToCart(target);
                        if (target.id === 'directOrderBtn') App.checkout.process(true);
                        if (target.id === 'checkoutBtn') App.checkout.process(false);
                        if (target.id === 'clearCartBtn') App.cart.clear();
                        if (target.id === 'applyCouponBtn') App.cart.applyCoupon(parentModal.querySelector('#couponInput').value);
                        if (target.closest('.remove-cart-item')) App.cart.remove(target.closest('.remove-cart-item').dataset.index);
                    }
                },
                handleAddToCart(button) {
                    const modal = button.closest('.modal');
                    const productName = modal.dataset.productName;
                    const variantName = modal.dataset.variantName;
                    const price = parseFloat(modal.dataset.price);
                    const quantity = parseInt(modal.querySelector('#modalQuantity').value);
                    const notes = modal.querySelector('#modalNotes').value.trim();
                    const startElement = document.querySelector(`[data-title="${productName}"] .product-icon`);
                    
                    const newItem = { id: `${productName}-${variantName}`, name: productName, variant: variantName, price, quantity, notes };
                    App.cart.add(newItem, startElement);
                    App.ui.closeModal(modal);
                }
            }
        };

        App.init();
    });
    </script>
</body>
</html>